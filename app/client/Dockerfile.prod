FROM node:17.2-alpine

RUN mkdir -p /home/app
COPY . /home/app
WORKDIR /home/app

ENV NODE_OPTIONS --openssl-legacy-provider
ENV NUXT_BASE_API_URL https://51.159.190.37/api
ENV HOST 0.0.0.0
ENV NODE_TLS_REJECT_UNAUTHORIZED 0
ENV NUXT_HOST 0.0.0.0
RUN npm install
RUN npm run build

CMD ["npm", "start"]
